(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["siswa"],{"893c":function(e,t,n){"use strict";var a=n("ac67"),i=n.n(a);i.a},a2b2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{persistent:"",value:e.dialogActive,"max-width":"600px"}},[n("v-card",[n("v-alert",{attrs:{value:e.errorMsg,dismissible:"",color:"error"}},[e._v(" "+e._s(e.errorMsg)+" ")]),n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("FormGuru",{attrs:{forminput:e.forminput,imageUrl:e.imageUrl}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),n("Dialog",{attrs:{dialog:e.alert,title:"Hapus data",text:"Anda yakin ingin menghapus data ini ?"},on:{ok:e.OkButton,no:e.NoButton}}),n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],attrs:{color:"pink",fab:"",dark:"",small:"",fixed:"",bottom:"",right:""},on:{click:e.addItem}},[n("v-icon",[e._v("add")])],1)],1),n("v-card-title",[e._v(" Table Siswa "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.theaders,items:e.table,options:e.options,"server-items-length":e.lentable,loading:e.isLoading},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" edit ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" delete ")])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("v-snackbar",{attrs:{value:e.errorMsg,color:e.color,"multi-line":"multi-line"===e.mode,timeout:e.timeout,vertical:"vertical"===e.mode}},[e._v(" "+e._s(e.errorMsg)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){return e.removeError()}}},[e._v(" Close ")])],1)],1)},i=[],r=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("c975"),n("fb6a"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("ac1f"),n("841c"),n("159b"),n("ade3")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-flex",{staticClass:"text-xs-center text-sm-center text-md-center text-lg-center",attrs:{xs12:""}},[e.imageUrl?n("img",{attrs:{src:e.imageUrl,height:"150"}}):e._e(),n("v-text-field",{attrs:{label:"Select Image","prepend-icon":"attach_file"},on:{click:e.pickFile},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}}),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),n("v-text-field",{attrs:{counter:50,label:"Name","data-vv-name":"name",required:""},model:{value:e.forminput.name,callback:function(t){e.$set(e.forminput,"name",t)},expression:"forminput.name"}}),n("v-text-field",{attrs:{counter:20,label:"NIS",required:""},on:{keypress:e.isNumber},model:{value:e.forminput.nis,callback:function(t){e.$set(e.forminput,"nis",t)},expression:"forminput.nis"}}),n("v-select",{attrs:{items:e.genderlist,label:"Jenis Kelamin",required:""},model:{value:e.forminput.gender,callback:function(t){e.$set(e.forminput,"gender",t)},expression:"forminput.gender"}}),n("v-select",{attrs:{items:e.religionlist,label:"Agama",required:""},model:{value:e.forminput.religion,callback:function(t){e.$set(e.forminput,"religion",t)},expression:"forminput.religion"}}),n("v-text-field",{attrs:{counter:50,label:"Tempat Lahir",required:""},model:{value:e.forminput.bornplace,callback:function(t){e.$set(e.forminput,"bornplace",t)},expression:"forminput.bornplace"}}),n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.forminput.borndate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.forminput,"borndate",t)},"update:return-value":function(t){return e.$set(e.forminput,"borndate",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-text-field",e._g({attrs:{label:"Picker in menu","prepend-icon":"event",readonly:"",required:""},model:{value:e.forminput.borndate,callback:function(t){e.$set(e.forminput,"borndate",t)},expression:"forminput.borndate"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01",required:""},on:{change:e.save},model:{value:e.forminput.borndate,callback:function(t){e.$set(e.forminput,"borndate",t)},expression:"forminput.borndate"}})],1),n("v-text-field",{attrs:{counter:50,label:"Nama Ayah","data-vv-name":"name",required:""},model:{value:e.forminput.fathername,callback:function(t){e.$set(e.forminput,"fathername",t)},expression:"forminput.fathername"}}),n("v-text-field",{attrs:{counter:50,label:"Nama Ibu","data-vv-name":"name",required:""},model:{value:e.forminput.mothername,callback:function(t){e.$set(e.forminput,"mothername",t)},expression:"forminput.mothername"}}),n("v-textarea",{attrs:{counter:50,label:"Alamat",hint:"Tulis alamat disini..."},model:{value:e.forminput.address,callback:function(t){e.$set(e.forminput,"address",t)},expression:"forminput.address"}}),n("v-text-field",{attrs:{counter:12,label:"Nomor Telepon",required:""},on:{keypress:e.isNumber},model:{value:e.forminput.phonenumber,callback:function(t){e.$set(e.forminput,"phonenumber",t)},expression:"forminput.phonenumber"}}),n("v-select",{attrs:{items:e.classselect,"item-text":"name","item-value":"id",label:"Kelas","persistent-hint":"","return-object":"","single-line":""},model:{value:e.forminput.class,callback:function(t){e.$set(e.forminput,"class",t)},expression:"forminput.class"}})],1)},o=[],l=(n("baa5"),{props:{forminput:Object,imageUrl:String},data:function(){return{valid:!1,menu:!1,genderlist:["Lelaki","Perempuan"],religionlist:["Islam","Kristen Protestan","Katolik","Buddha","Hindu","Kong Hu Cu"],dialog:!1,imageName:""}},methods:{isNumber:function(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!=t))return!0;e.preventDefault()},save:function(e){this.$refs.menu.save(e)},pickFile:function(){this.$refs.image.click()},onFilePicked:function(e){var t=this,n=e.target.files;if(void 0!==n[0]){if(this.imageName=n[0].name,this.imageName.lastIndexOf(".")<=0)return;var a=new FileReader;a.readAsDataURL(n[0]),a.addEventListener("load",(function(){t.imageUrl=a.result,t.forminput.imageFile=n[0]}))}else this.imageName="",this.forminput.imageFile="",this.imageUrl=""}},computed:{classselect:function(){return this.$store.getters["students/getClassList"]},selected:function(){return this.classselect[this.forminput.class]}},watch:{menu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))}}}),c=l,u=n("2877"),d=n("6544"),m=n.n(d),p=n("2e4b"),f=n("0e8f"),h=n("4bd4"),v=n("e449"),g=n("b974"),b=n("8654"),x=n("a844"),k=Object(u["a"])(c,s,o,!1,null,null,null),w=k.exports;m()(k,{VDatePicker:p["a"],VFlex:f["a"],VForm:h["a"],VMenu:v["a"],VSelect:g["a"],VTextField:b["a"],VTextarea:x["a"]});var _=n("3f7a");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={components:{FormGuru:w,Dialog:_["a"]},data:function(){return{color:"",mode:"",timeout:6e3,alert:!1,forminput:{imageFile:null,name:"Kristian",nis:"023912389123",gender:"Lelaki",religion:"Kristen Protestan",bornplace:"Jakarta",borndate:"",fathername:"",mothername:"",address:"Tangerang",phonenumber:"08943429343",class:{name:"",id:-1}},imageUrl:"",total:0,selected:[],sortbylast:null,search:"",loading:!1,formTitle:"Input Siswa",hidden:!1,options:{},dialog:!1,editedIndex:-1,idselected:0,sortingDesc:"ASC",theaders:[{text:"Nama",value:"name"},{text:"NIS",value:"NIS"},{text:"Kelamin",value:"gender"},{text:"Agama",value:"religion"},{text:"Tempat Lahir",value:"born_place"},{text:"Tanggal Lahir",value:"born_date"},{text:"Ayah",value:"father_name"},{text:"Ibu",value:"mother_name"},{text:"Alamat",value:"address"},{text:"No Telp",value:"phone_number"},{text:"Actions",value:"action",sortable:!1}],currentY:0,lastY:0}},methods:{handleScroll:function(e){this.currentY=e.pageY,this.currentY>this.lastY?this.hidden=!0:this.hidden=!1,this.lastY=this.currentY},removeError:function(){var e=this.$store.dispatch;e("students/removeError")},editItem:function(e){var t=e.class_id,n=e.class_name,a=e.father_name,i=e.mother_name,r=e.department_id,s=e.gender,o=e.student_id;this.editedIndex=-1,this.forminput={imageFile:null,name:e.name,nis:e.NIS,gender:"".concat(s.charAt(0).toUpperCase()).concat(s.slice(1)),religion:e.religion,bornplace:e.born_place,borndate:e.dateborn,address:e.address,fathername:a,mothername:i,phonenumber:e.phone_number,class:{name:n,id:t,dept:r}},this.idselected=o,this.imageUrl="http://localhost:3000/images/uploads/".concat(e.picture),this.formTitle="Edit Siswa";var l=this.$store.dispatch;l("students/openDialog")},addItem:function(){this.forminput={imageFile:null,name:"Kristian",nis:"023912389123",gender:"Lelaki",religion:"Kristen Protestan",bornplace:"Jakarta",borndate:"",fathername:"",mothername:"",address:"Tangerang",phonenumber:"08943429343",class:{}},this.imageUrl="",this.editedIndex=1,this.formTitle="Tambah Siswa";var e=this.$store.dispatch;e("students/openDialog")},deleteItem:function(e){var t=this.table.indexOf(e);this.alert=!0,this.idselected=t},OkButton:function(){var e=this.$store.dispatch;e("students/deleteStudent",{id:this.idselected.teacher_id}),this.alert=!1,this.idselected=0},NoButton:function(){this.alert=!1},close:function(){this.idselected=0},closeDialog:function(){var e=this.$store.dispatch;e("students/closeDialog")},save:function(){if(!this.isLoading){var e=new FormData;-1==this.editedIndex&&e.append("id",this.idselected),e.append("imgusr",this.forminput.imageFile),e.append("name",this.forminput.name),e.append("nis",this.forminput.nis),e.append("gender",this.forminput.gender),e.append("religion",this.forminput.religion),e.append("bornPlace",this.forminput.bornplace),e.append("bornDate",this.forminput.borndate),e.append("fatherName",this.forminput.fathername),e.append("motherName",this.forminput.mothername),e.append("address",this.forminput.address),e.append("phoneNumber",this.forminput.phonenumber),e.append("classid",this.forminput.class.id);var t=this.$store.dispatch;-1==this.editedIndex?t("students/updateStudent",{data:e}):t("students/uploadStudent",{data:e})}},getDataFromApi:function(){var e=this.$store.dispatch,t=this.options,n=t.sortBy,a=t.sortDesc,i=t.page,r=t.itemsPerPage;n.length>0&&(this.sortbylast=n),1===a.length&&(this.sortingDesc=a[0]?"DESC":"ASC"),e("students/storeReq",{index:i,rows:r,search:this.search,sortby:this.sortbylast,sort:this.sortingDesc})}},computed:{table:function(){return this.$store.getters["students/getAllItems"]},isLoading:function(){return this.$store.getters["students/getLoading"]},lentable:function(){return this.$store.getters["students/getLenItems"]},isUpload:function(){return this.$store.getters["students/getStatUpload"]},errorMsg:function(){return this.$store.getters["students/getError"]},params:function(){return S({},this.options,{query:this.search})},dialogActive:function(){return this.$store.getters["students/getDialog"]}},watch:{dialogActive:{handler:function(e){e||this.close()},deep:!0},options:{handler:function(){this.getDataFromApi()},deep:!0},params:{handler:function(){this.getDataFromApi()},deep:!0},isUpload:{handler:function(e,t){~e&&t&&this.getDataFromApi()},deep:!0}},mounted:function(){this.getDataFromApi()},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},D=y,N=(n("893c"),n("0798")),O=n("8336"),I=n("b0af"),A=n("99d9"),F=n("a523"),T=n("8fea"),V=n("169a"),P=n("0789"),C=n("132d"),j=n("2db4"),L=n("2fa4"),U=Object(u["a"])(D,a,i,!1,null,null,null);t["default"]=U.exports;m()(U,{VAlert:N["a"],VBtn:O["a"],VCard:I["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"],VContainer:F["a"],VDataTable:T["a"],VDialog:V["a"],VFabTransition:P["c"],VIcon:C["a"],VSnackbar:j["a"],VSpacer:L["a"],VTextField:b["a"]})},ac67:function(e,t,n){}}]);
//# sourceMappingURL=siswa.e8f2b962.js.map